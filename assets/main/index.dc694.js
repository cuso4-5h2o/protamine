window.__require=function t(e,i,a){function s(c,n){if(!i[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!n&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){return s(e[c][1][t]||t)},d,d.exports,t,e,i,a)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<a.length;c++)s(a[c]);return s}({Ball:[function(t,e){"use strict";cc._RF.push(e,"ca822yq3F1Deavc077szBfk","Ball");var i=t("Global");cc.Class({extends:cc.Component,properties:{ballSprite:cc.Sprite,gameOverPrefab:cc.Prefab,toastPrefab:cc.Prefab,pausePrefab:cc.Prefab,speedClimbing:0,speedFalling:0,comeAudio:cc.AudioClip,climbingAudio:cc.AudioClip,crashAudio:cc.AudioClip},start:function(){this.isClimbingAudioPlaying=!1,this.node.getComponent(cc.Animation).on("stop",this.startGame,this),cc.audioEngine.play(this.comeAudio,!1,i.settings.volume)},update:function(){i.isPlaying&&(i.isClimbing?(i.speedClimbing>.2&&(i.speedClimbing/=1.02),this.node.y+=this.speedClimbing*i.speedClimbing*(1+i.settings.speed),this.ballSprite.node.angle<=40&&i.settings.enable.enableRotation&&this.ballSprite.node.angle++,this.isClimbingAudioPlaying||(this.climbingAudioHandle=cc.audioEngine.play(this.climbingAudio,!0,i.settings.volume/1.5),this.isClimbingAudioPlaying=!0)):(i.speedClimbing<2&&(i.speedClimbing*=1.02),this.node.y-=this.speedFalling*i.speedClimbing*(1+i.settings.speed),this.ballSprite.node.angle>=-40&&i.settings.enable.enableRotation&&this.ballSprite.node.angle--,this.isClimbingAudioPlaying&&(cc.audioEngine.stop(this.climbingAudioHandle),this.isClimbingAudioPlaying=!1)),i.invincibleTime&&this.node.opacity>=125&&this.node.opacity--,!i.invincibleTime&&this.node.opacity<=125&&this.node.opacity++,this.node.y>-464&&this.node.y<464?i.ballPosition=this.node.position:this.gameOver())},startGame:function(){this.node.y=0,i.speedClimbing=1;var t=this.node.getComponent(cc.Animation);i.isPlaying=!0,i.invincibleTime=!0,setTimeout(function(){i.invincibleTime=!1},900),t.off("stop",this.startGame,this)},gameOver:function(){if(!i.invincibleTime){i.isPlaying=!1,i.isClimbing=!1,this.isClimbingAudioPlaying&&(cc.audioEngine.stop(this.climbingAudioHandle),this.isClimbingAudioPlaying=!1),this.crashAnim=this.getComponent(cc.Animation),this.crashAnim.playAdditive("ball-crash"),cc.audioEngine.play(this.crashAudio,!1,i.settings.volume);var t=this;this.played=function(){t.node.y=0,i.isPlaying=!1,cc.find("Canvas").addChild(cc.instantiate(t.toastPrefab)),cc.find("Canvas").addChild(cc.instantiate(t.gameOverPrefab)),t.crashAnim.off("stop",t.played,t)},this.crashAnim.on("stop",t.played,t)}},pauseGame:function(){i.isPlaying&&(this.isClimbingAudioPlaying&&(cc.audioEngine.stop(this.climbingAudioHandle),this.isClimbingAudioPlaying=!1),i.isPlaying=!1,i.isClimbing=!1,this.getComponent(cc.Animation).playAdditive("ball-crash"),cc.find("Canvas").addChild(cc.instantiate(this.toastPrefab)),cc.find("Canvas").addChild(cc.instantiate(this.pausePrefab)))},onKeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.space:i.isClimbing=!0,i.speedClimbing=1}},onKeyUp:function(t){switch(t.keyCode){case cc.macro.KEY.space:i.isClimbing=!1,i.speedClimbing=1}},onLoad:function(){i.isClimbing=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onDestroy:function(){this.isClimbingAudioPlaying&&(cc.audioEngine.stop(this.climbingAudioHandle),this.isClimbingAudioPlaying=!1),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)}}),cc._RF.pop()},{Global:"Global"}],GameOver:[function(t,e){"use strict";cc._RF.push(e,"deb06MqyeVM2628EKyGQciV","GameOver");var i=t("Global");cc.Class({extends:cc.Component,properties:{scoreDisplay:cc.Label,highestLabel:cc.Label,fragmentNode:cc.Node,fragmentLabel:cc.Label,fragmentAudio:cc.AudioClip},start:function(){this.gainedFragments=!1,i.fragments+=Math.floor(i.score/1e4),i.score>i.highestScore?(i.highestScore=i.score,this.highestLabel.getComponent(cc.Animation).play()):this.highestLabel.string="Highest Score: "+i.highestScore.toString(),i.saveData()},update:function(){parseInt(this.scoreDisplay.string)<i.score&&Math.round(parseInt(this.scoreDisplay.string)+i.score/25)<i.score?i.score<100?this.scoreDisplay.string=(parseInt(this.scoreDisplay.string)+10).toString():this.scoreDisplay.string=Math.round(parseInt(this.scoreDisplay.string)+i.score/25).toString():(this.scoreDisplay.string=i.score.toString(),i.score>=1e4&&(this.gainedFragments||(this.fragmentLabel.string=Math.floor(i.score/1e4).toString(),this.fragmentNode.getComponent(cc.Animation).play(),cc.audioEngine.play(this.fragmentAudio,!1,i.settings.volume),this.gainedFragments=!0)))}}),cc._RF.pop()},{Global:"Global"}],Game:[function(t,e){"use strict";cc._RF.push(e,"f2498JnoBxFaYrWcxEzEDkG","Game");var i=t("Global");cc.Class({extends:cc.Component,properties:{starPrefab:cc.Prefab,bigStarPrefab:cc.Prefab,magicStarPrefab:cc.Prefab,crossPrefab:cc.Prefab,smallStarsNode:cc.Node,bigStarsNode:cc.Node,magicStarsNode:cc.Node,crossesGroup:cc.Node,scoreDisplay:cc.Label,backgroundNode:cc.Node},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),i.speedPlaying=1+i.settings.speed,this.isDay=!0,i.ballPosition=null,i.score=0,i.isClimbing=!1,i.pickingRadius=32,i.haloNode=null,i.speedClimbing=1,i.magicStarStatuses={},i.scoreTimes=1;for(var t=1;t<=80;t++){var e=Math.random(),a=cc.instantiate(this.starPrefab);e<.3?(a.color=cc.Color.YELLOW,a.getComponent("Star").starValue=10):e<.5?(a.color=cc.Color.RED,a.getComponent("Star").starValue=20):e<.65?(a.color=cc.Color.GREEN,a.getComponent("Star").starValue=40):(a.color=cc.Color.BLUE,a.getComponent("Star").starValue=80),this.smallStarsNode.addChild(a),a.x=640*Math.random()-320,a.y=960*Math.random()-480}for(t=1;t<=80;t++)e=Math.random(),a=cc.instantiate(this.starPrefab),e<.3?(a.color=cc.Color.YELLOW,a.getComponent("Star").starValue=10):e<.5?(a.color=cc.Color.RED,a.getComponent("Star").starValue=20):e<.65?(a.color=cc.Color.GREEN,a.getComponent("Star").starValue=40):(a.color=cc.Color.BLUE,a.getComponent("Star").starValue=80),this.smallStarsNode.addChild(a),a.x=1280*Math.random()+320,a.y=960*Math.random()-480;var s=1640*Math.random()+320,o=960*Math.random()-480;for(t=1;t<=20;t++)e=Math.random(),a=cc.instantiate(this.bigStarPrefab),e<.3?(a.color=cc.Color.YELLOW,a.getComponent("Star").starValue=10):e<.5?(a.color=cc.Color.RED,a.getComponent("Star").starValue=20):e<.65?(a.color=cc.Color.GREEN,a.getComponent("Star").starValue=40):(a.color=cc.Color.BLUE,a.getComponent("Star").starValue=80),this.bigStarsNode.addChild(a),a.x=s+32*Math.random()*t,a.y=o+16*Math.random()-8;for(t=1;t<=15;t++)a=cc.instantiate(this.starPrefab),this.smallStarsNode.addChild(a),a.color=cc.Color.CYAN,a.getComponent("Star").starType=2,a.x=1400*Math.random()+320,a.y=960*Math.random()-480;for(t=1;t<=15;t++)a=cc.instantiate(this.crossPrefab),this.crossesGroup.addChild(a),a.x=1480*Math.random()-300,a.y=960*Math.random()-480,a.angle=360*Math.random()-180;for(t=1;t<=15;t++){switch(e=Math.floor(4*Math.random()),a=cc.instantiate(this.magicStarPrefab),e){case 0:if(!(i.magicStars.green>=0))continue;a.color=cc.Color.GREEN,a.getComponent("Star").starType=7;break;case 1:if(!(i.magicStars.yellow>=0))continue;a.color=cc.Color.YELLOW,a.getComponent("Star").starType=4;break;case 2:if(!(i.magicStars.blue>=0))continue;a.color=cc.Color.BLUE,a.getComponent("Star").starType=5;break;case 3:if(!(i.magicStars.red>=0))continue;a.color=cc.Color.RED,a.getComponent("Star").starType=6}this.magicStarsNode.addChild(a),a.x=5e3*Math.random()+320,a.y=960*Math.random()-480,a.angle=360*Math.random()-180}},update:function(){this.isDay&&Math.floor(i.score/1e4)%2==1&&i.settings.enable.enableDayNight&&(this.isDay=!1,this.backgroundNode.getComponent(cc.Animation).play("to-night")),!this.isDay&&Math.floor(i.score/1e4)%2==0&&i.settings.enable.enableDayNight&&(this.isDay=!0,this.backgroundNode.getComponent(cc.Animation).play("to-day")),this.scoreDisplay.string=i.score.toString()},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onTouchStart:function(){i.isClimbing=!0,i.speedClimbing=1},onTouchEnd:function(){i.isClimbing=!1,i.speedClimbing=1},onTouchisCanceled:function(){cc.find("Canvas/Ball").getComponent("Ball").pauseGame()},onKeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.escape:cc.find("Canvas/Ball").getComponent("Ball").pauseGame()}}}),cc._RF.pop()},{Global:"Global"}],Global:[function(t,e){"use strict";cc._RF.push(e,"dc02fgvhjNMAJc6DqnfPf7z","Global"),e.exports={project:{version:"1.0.0",homePage:"https://github.com/cuso4-5h2o/protamine"},settings:cc.sys.localStorage.getItem("settings")?JSON.parse(cc.sys.localStorage.getItem("settings")):{speed:1,volume:.5,enable:{enableDayNight:!0,enableParticle:!0,enableRotation:!0}},fragments:cc.sys.localStorage.getItem("fragments")?parseInt(cc.sys.localStorage.getItem("fragments")):0,highestScore:cc.sys.localStorage.getItem("highestScore")?parseInt(cc.sys.localStorage.getItem("highestScore")):0,magicStars:cc.sys.localStorage.getItem("magicStars")?JSON.parse(cc.sys.localStorage.getItem("magicStars")):{},score:0,ballPosition:null,isPlaying:!1,isClimbing:!1,pickingRadius:32,speedPlaying:1,speedClimbing:1,scoreTimes:1,haloNode:null,particleNode:null,magicStarStatuses:{},invincibleTime:!1,saveData:function(){cc.sys.localStorage.setItem("fragments",this.fragments.toString()),cc.sys.localStorage.setItem("highestScore",this.highestScore.toString()),cc.sys.localStorage.setItem("settings",JSON.stringify(this.settings)),cc.sys.localStorage.setItem("magicStars",JSON.stringify(this.magicStars))}},cc._RF.pop()},{}],GoHome:[function(t,e){"use strict";cc._RF.push(e,"21f61KgYZhA5b+1U7fSlbpt","GoHome"),cc.Class({extends:cc.Component,onLoad:function(){cc.director.preloadScene("home")},goHome:function(){cc.director.loadScene("home")}}),cc._RF.pop()},{}],HomeBackground:[function(t,e){"use strict";cc._RF.push(e,"04dc5+cd/NK04shBM4xPQHB","HomeBackground");var i=t("Global");cc.Class({extends:cc.Component,properties:{ballNode:cc.Node,ballSprite:cc.Sprite,starsGroupNode:cc.Node,starPrefab:cc.Prefab},onLoad:function(){screen.width>screen.height&&(alert("This is a portrait game, please rotate your device.\nIf you like to play on a computer with a landscape screen, you may consider using developer tools to simulate mobile devices."),location.reload()),this.yMin=960*Math.random()-480,this.yMax=960*Math.random()-480,i.ballPosition=this.ballNode.position,i.isPlaying=!0,i.score=0;for(var t=1;t<=230;t++){var e=Math.floor(5*Math.random()),a=cc.instantiate(this.starPrefab);switch(e){case 0:a.color=cc.Color.YELLOW;break;case 1:a.color=cc.Color.RED;break;case 2:a.color=cc.Color.GREEN;break;case 3:a.color=cc.Color.BLUE;break;case 4:a.color=cc.Color.CYAN}this.starsGroupNode.addChild(a),a.x=1680*Math.random()-320,a.y=960*Math.random()-480}},update:function(){i.isClimbing?(this.ballNode.y+=6,this.ballSprite.node.angle<=10&&i.settings.enable.enableRotation&&this.ballSprite.node.angle++,this.ballNode.y>=this.yMax&&(i.isClimbing=!1,this.yMax=960*Math.random()-480)):(this.ballNode.y-=6,this.ballSprite.node.angle>=10&&i.settings.enable.enableRotation&&this.ballSprite.node.angle--,this.ballNode.y<=this.yMin&&(i.isClimbing=!0,this.yMin=960*Math.random()-480)),i.ballPosition=this.ballNode.position},onDestroy:function(){i.ballPosition=null,i.isPlaying=!1,i.isClimbing=!1,i.score=0}}),cc._RF.pop()},{Global:"Global"}],Lab:[function(t,e){"use strict";cc._RF.push(e,"b1f75p09udKup/l/qWKcm33","Lab");var i=t("Global"),a=cc.Class({name:"MagicStar",properties:{magicStarId:"",magicStarName:"",magicStarColor:cc.Color,magicStarDescription:""}});cc.Class({extends:cc.Component,properties:{magicStars:{default:[],type:a},toastPrefab:cc.Prefab,fragmentsLabel:cc.Label,magicStarList:cc.Node,itemPrefab:cc.Prefab},onLoad:function(){for(var t=0;t<this.magicStars.length;t++){var e=cc.instantiate(this.itemPrefab),i=this.magicStars[t];this.magicStarList.addChild(e),e.getComponent("MagicStarItem").init({id:i.magicStarId,name:i.magicStarName,color:i.magicStarColor,description:i.magicStarDescription})}},update:function(){this.fragmentsLabel.string=i.fragments.toString()}}),cc._RF.pop()},{Global:"Global"}],MagicStarItem:[function(t,e){"use strict";cc._RF.push(e,"14bcdLMjetKHLjT0P2vq8S7","MagicStarItem");var i=t("Global"),a=[10,20,40,80,160];cc.Class({extends:cc.Component,properties:{magicStarIconNode:cc.Node,magicStarDescriptionNode:cc.Node,magicStarProgressNode:cc.Node,updateCostNode:cc.Node,updateButtonNode:cc.Node,magicStarNameLabel:cc.Label,magicStarDescriptionLabel:cc.Label,updateCostLabel:cc.Label,updateButtonLabel:cc.Label,toastPrefab:cc.Prefab,progressPrefab:cc.Prefab,purchasePrefab:cc.Prefab},init:function(t){if(this.magicStarId=t.id,this.magicStarNameLabel.string=t.name,this.magicStarIconNode.color=t.color,this.magicStarDescriptionLabel.string=t.description,i.magicStars[this.magicStarId]>=0){i.magicStars[this.magicStarId]<5?(this.updateCostNode.opacity=255,this.updateCostLabel.string=a[i.magicStars[this.magicStarId]].toString(),this.updateButtonLabel.string="Upgrade"):(this.updateCostNode.destroy(),this.updateButtonNode.destroy());for(var e=0;e<i.magicStars[this.magicStarId];e++)this.magicStarProgressNode.addChild(cc.instantiate(this.progressPrefab));this.magicStarProgressNode.opacity=255}else this.updateCostNode.opacity=255,this.updateCostLabel.string="5",this.updateButtonLabel.string="Purchase",this.magicStarDescriptionNode.opacity=255},purchase:function(){cc.find("Canvas").addChild(cc.instantiate(this.toastPrefab));var t=cc.instantiate(this.purchasePrefab);cc.find("Canvas").addChild(t),t.getComponent("MagicStarPurchase").init({id:this.magicStarId,name:this.magicStarNameLabel.string,color:this.magicStarIconNode.color,itemNode:this.node})}}),cc._RF.pop()},{Global:"Global"}],MagicStarPurchase:[function(t,e){"use strict";cc._RF.push(e,"05f5antidhHfKky2i2JX8V4","MagicStarPurchase");var i=t("Global"),a=t("Toast"),s=[10,20,40,80,160];cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,titleLabel:cc.Label,levelLabel:cc.Label,costLabel:cc.Label,purchaseLabel:cc.Label,progressPrefab:cc.Prefab,modalAudio:cc.AudioClip,purchaseAudio:cc.AudioClip,updateAudio:cc.AudioClip},onLoad:function(){this.isDestroyed=!1},init:function(t){this.magicStarId=t.id,this.itemNode=t.itemNode,this.titleLabel.string=this.titleLabel.string.replace("{action}",i.magicStars[this.magicStarId]>=0?"Upgrade":"Purchase").replace("{name}",t.name);var e=i.magicStars[this.magicStarId]>=0?s[i.magicStars[this.magicStarId]]:5;this.purchaseLabel.string=i.magicStars[this.magicStarId]>=0?"Upgrade":"Purchase",this.levelLabel.string=i.magicStars[this.magicStarId]>=0?(i.magicStars[this.magicStarId]+1).toString():"0",this.iconNode.color=t.color,this.costLabel.string=e.toString()+(i.fragments>=e?", you have ":", but you only have ")+i.fragments.toString()+".",i.fragments<e&&this.purchaseLabel.node.parent.destroy(),this.node.getComponent(cc.Animation).play("modal-open"),cc.audioEngine.play(this.modalAudio,!1,i.settings.volume)},confirm:function(){if(i.magicStars[this.magicStarId]>=0){if(i.fragments>=s[i.magicStars[this.magicStarId]]){i.fragments-=s[i.magicStars[this.magicStarId]],i.magicStars[this.magicStarId]++,cc.audioEngine.play(this.updateAudio,!1,i.settings.volume),this.itemNode.getChildByName("Cost").getChildByName("Label").getComponent(cc.Label).string=s[i.magicStars[this.magicStarId]].toString();var t=cc.instantiate(this.progressPrefab);this.itemNode.getChildByName("Progress").addChild(t),t.getComponent(cc.Animation).play(),i.magicStars[this.magicStarId]>=5&&(this.itemNode.getChildByName("Cost").destroy(),this.itemNode.getChildByName("Upgrade").destroy())}}else i.fragments>=5&&(i.fragments-=5,i.magicStars[this.magicStarId]=0,cc.audioEngine.play(this.purchaseAudio,!1,i.settings.volume),this.itemNode.getChildByName("Cost").getChildByName("Label").getComponent(cc.Label).string=s[i.magicStars[this.magicStarId]].toString(),this.itemNode.getChildByName("Upgrade").getChildByName("Label").getComponent(cc.Label).string="Upgrade",this.itemNode.getChildByName("Progress").opacity=255,this.itemNode.getChildByName("Description").opacity=0);i.saveData(),this.selfDestroy()},selfDestroy:function(){if(!this.isDestroyed){cc.find("Canvas/Toast").getComponent(a).selfDestroy(),this.isDestroyed=!0;var t=this.node.getComponent(cc.Animation);t.play("modal-close"),t.on("stop",function(){this.node.destroy()},this)}}}),cc._RF.pop()},{Global:"Global",Toast:"Toast"}],MagicStarStatuses:[function(t,e){"use strict";cc._RF.push(e,"7b2f1e2sYRMCJRDAhNQQwuF","MagicStarStatuses");var i=t("Global");cc.Class({extends:cc.Component,properties:{magicStarStatusPrefab:cc.Prefab},onLoad:function(){this.yellowNode=!1,this.interval=setInterval(function(){i.isPlaying&&(i.magicStarStatuses.yellow>0&&i.magicStarStatuses.yellow--,i.magicStarStatuses.green>0&&i.magicStarStatuses.green--,i.magicStarStatuses.blue>0&&i.magicStarStatuses.blue--,i.magicStarStatuses.red>0&&i.magicStarStatuses.red--)},1e3)},update:function(){i.magicStarStatuses.yellow?this.yellowNode?this.yellowNode.opacity=i.magicStarStatuses.yellow/20*255:(this.yellowNode=cc.instantiate(this.magicStarStatusPrefab),this.yellowNode.color=cc.Color.YELLOW,this.node.addChild(this.yellowNode)):this.yellowNode&&(i.invincibleTime=!0,setTimeout(function(){i.invincibleTime=!1},450),i.magicStarStatuses.yellow=null,i.pickingRadius=32,i.haloNode.destroy(),i.haloNode=null,this.yellowNode.destroy(),this.yellowNode=null),i.magicStarStatuses.green?this.greenNode?this.greenNode.opacity=i.magicStarStatuses.green/(10+5*i.magicStars.green)*255:(this.greenNode=cc.instantiate(this.magicStarStatusPrefab),this.greenNode.color=cc.Color.GREEN,this.node.addChild(this.greenNode)):this.greenNode&&(i.magicStarStatuses.green=null,i.scoreTimes=1,this.greenNode.destroy(),this.greenNode=null),i.magicStarStatuses.red?this.redNode?this.redNode.opacity=i.magicStarStatuses.red/(10+2*i.magicStars.red)*255:(this.redNode=cc.instantiate(this.magicStarStatusPrefab),this.redNode.color=cc.Color.RED,this.node.addChild(this.redNode)):this.redNode&&(i.invincibleTime=!0,setTimeout(function(){i.invincibleTime=!1},450),i.magicStarStatuses.red=null,i.speedPlaying/=i.settings.speed,i.particleNode.destroy(),i.particleNode=null,this.redNode.destroy(),this.redNode=null),i.magicStarStatuses.blue?this.blueNode?this.blueNode.opacity=i.magicStarStatuses.blue/(10+5*i.magicStars.blue)*255:(i.invincibleTime=!0,setTimeout(function(){i.invincibleTime=!1},450),this.blueNode=cc.instantiate(this.magicStarStatusPrefab),this.blueNode.color=cc.Color.BLUE,this.node.addChild(this.blueNode)):this.blueNode&&(i.magicStarStatuses.blue=null,this.blueNode.destroy(),this.blueNode=null)},onDestroy:function(){clearInterval(this.interval)}}),cc._RF.pop()},{Global:"Global"}],Pause:[function(t,e){"use strict";cc._RF.push(e,"b24f46FzrZO24qSrbZEwO7o","Pause");var i=t("Global"),a=t("Toast"),s=t("Ball");cc.Class({extends:cc.Component,onLoad:function(){this.isDestroyed=!1},continue:function(){i.isPlaying=!1;var t=cc.find("Canvas/Ball").getComponent(cc.Animation),e=cc.find("Canvas/Ball").getComponent(s);t.play(),t.on("stop",e.startGame,e),cc.find("Canvas/Toast").getComponent(a).selfDestroy(),this.selfDestroy()},selfDestroy:function(){if(!this.isDestroyed){this.isDestroyed=!0;var t=this.node.getComponent(cc.Animation);t.play("general-hide"),t.on("stop",function(){this.node.destroy()},this)}}}),cc._RF.pop()},{Ball:"Ball",Global:"Global",Toast:"Toast"}],Settings:[function(t,e){"use strict";cc._RF.push(e,"46179npralIiq8UdWsN7J4m","Settings");var i=t("Global"),a=cc.Class({name:"labeledToggle",properties:{name:"",toggle:cc.Toggle}});cc.Class({extends:cc.Component,properties:{speedSlider:cc.Slider,volumeSlider:cc.Slider,toggleItems:{default:[],type:a},versionLabel:cc.Label},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);var t=this;this.hasChanged=!1,this.timer=setInterval(function(){t.hasChanged&&(i.saveData(),t.reLoad(),t.hasChanged=!1)},500),this.versionLabel.string=this.versionLabel.string.replace("{version}",i.project.version),this.reLoad()},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),clearInterval(this.timer)},onSlided:function(t){switch(t.slideEvents[0].customEventData){case"speed":i.settings.speed=t.progress+.5;break;case"volume":i.settings.volume=t.progress}this.hasChanged=!0},onChecked:function(t){i.settings.enable[t.checkEvents[0].customEventData]=t.isChecked,this.hasChanged=!0},reLoad:function(){this.speedSlider.progress=i.settings.speed-.5,this.volumeSlider.progress=i.settings.volume;for(var t=0;t<this.toggleItems.length;t++)this.toggleItems[t].toggle.isChecked=i.settings.enable[this.toggleItems[t].name]},reset:function(){i.settings={speed:1,volume:.5,enable:{enableDayNight:!0,enableParticle:!0,enableRotation:!0}},i.saveData(),this.reLoad()},openHomePage:function(){window.open(i.project.homePage)}}),cc._RF.pop()},{Global:"Global"}],Springboard:[function(t,e){"use strict";cc._RF.push(e,"c8d441C0edIGJp1pzn+m5yS","Springboard");var i=t("Global");cc.Class({extends:cc.Component,onLoad:function(){cc.director.preloadScene("game"),cc.director.preloadScene("lab"),cc.director.preloadScene("settings")},startGame:function(t){t.currentTarget.getComponent(cc.Animation).play(),cc.director.loadScene("game"),i.isPlaying=!1,i.score=0},goToLab:function(){cc.director.loadScene("lab")},goToSetting:function(){cc.director.loadScene("settings")}}),cc._RF.pop()},{Global:"Global"}],Star:[function(t,e){"use strict";cc._RF.push(e,"08084JOQkZG4a8mRsYTALXx","Star");var i=t("Global"),a=t("Ball");cc.Class({extends:cc.Component,properties:{starType:0,starValue:0,isRotatable:!1,haloPrefab:cc.Prefab,particlePrefab:cc.Prefab,dissolvingAudio:cc.AudioClip,magicStarAudio:cc.AudioClip},onLoad:function(){this.isActived=!1},update:function(){switch(this.starType){case 3:i.magicStarStatuses.yellow>0||i.magicStarStatuses.red?this.isActived=!1:this.isActived=!0;break;case 4:i.score>25e3||cc.find("Canvas").getComponent("Game").isDay||i.magicStarStatuses.yellow>0||i.magicStarStatuses.blue>0||i.magicStarStatuses.red>0||i.magicStarStatuses.green>0?this.isActived=!1:this.isActived=!0;break;case 5:case 6:i.score>25e3||i.magicStarStatuses.blue>0||i.magicStarStatuses.red>0||i.magicStarStatuses.yellow>0?this.isActived=!1:this.isActived=!0;break;case 7:i.score>25e3||i.magicStarStatuses.green>0||i.magicStarStatuses.yellow>0||i.magicStarStatuses.red>0?this.isActived=!1:this.isActived=!0;break;default:this.isActived=!0}this.isRotatable&&i.settings.enable.enableRotation&&this.node.angle--,this.isCanceled&&(this.node.y-=6,this.node.y<=-500&&(this.node.x=640*Math.random()+960+(i.score/5e4+1)*i.speedPlaying*640,this.node.y=960*Math.random()-480,this.node.color=cc.Color.WHITE,this.isCanceled=!1)),i.isPlaying&&(this.node.x-=(i.score/5e4+1)*i.speedPlaying*2,this.node.x<-480&&(this.node.x=Math.random()*(640+(this.starType>=4?5e3:0))+320,this.node.y=960*Math.random()-480),this.isActived&&this.node.opacity<255?this.node.opacity+=5:!this.isActived&&this.node.opacity>0&&(this.node.opacity-=5),0==this.node.opacity&&(this.node.x=960+2940*Math.random()),this.getBallDistance()<i.pickingRadius&&this.isActived)&&this.onPicked()},getBallDistance:function(){return this.node.position.sub(i.ballPosition).mag()},onPicked:function(){if(!i.invincibleTime)switch(1!=this.starType&&3!=this.starType&&(this.node.x=940*Math.random()+960,this.node.y=960*Math.random()-480),this.starType){case 0:i.score+=Math.floor(this.starValue*i.scoreTimes*i.settings.speed);break;case 1:i.score+=Math.floor(this.starValue*i.scoreTimes*2.5*i.settings.speed),this.node.x=1688;break;case 2:i.score+=Math.floor(30*Math.random()*i.settings.speed);break;case 3:if(i.magicStarStatuses.blue){if(i.magicStarStatuses.blue>0){if(this.isCanceled)return;i.magicStarStatuses.blue=i.magicStarStatuses.blue-5>0?i.magicStarStatuses.blue-5:0,i.score+=Math.floor(this.starValue*i.scoreTimes*i.settings.speed),this.node.getComponent(cc.Animation).play("cross-dissolve"),cc.audioEngine.play(this.dissolvingAudio,!1,i.settings.volume),this.isCanceled=!0}}else cc.find("Canvas/Ball").getComponent(a).gameOver();break;case 4:if(cc.audioEngine.play(this.magicStarAudio,!1,i.settings.volume),i.magicStarStatuses.yellow=10,!i.haloNode){i.haloNode=cc.instantiate(this.haloPrefab);var t=cc.find("Canvas/Ball"),e=64+16*i.magicStars.yellow;t.addChild(i.haloNode),i.haloNode.position=cc.v2(0,0),i.haloNode.setContentSize(2*e,2*e),i.pickingRadius=e}this.node.x=5140*Math.random()+1960,this.node.y=960*Math.random()-480;break;case 5:cc.audioEngine.play(this.magicStarAudio,!1,i.settings.volume),i.magicStarStatuses.blue=10+5*i.magicStars.blue,this.node.x=5140*Math.random()+1960,this.node.y=960*Math.random()-480;break;case 6:cc.audioEngine.play(this.magicStarAudio,!1,i.settings.volume),i.speedPlaying*=1.5,i.magicStarStatuses.red=10+5*i.magicStars.red,!i.particleNode&&i.settings.enable.enableParticle&&(i.particleNode=cc.instantiate(this.particlePrefab),(t=cc.find("Canvas/Ball")).addChild(i.particleNode)),this.node.x=5140*Math.random()+1960,this.node.y=960*Math.random()-480;break;case 7:cc.audioEngine.play(this.magicStarAudio,!1,i.settings.volume),i.scoreTimes=2+.5*i.magicStars.green,i.magicStarStatuses.green=10,this.node.x=5640*Math.random()+1960,this.node.y=960*Math.random()-480}}}),cc._RF.pop()},{Ball:"Ball",Global:"Global"}],Toast:[function(t,e){"use strict";cc._RF.push(e,"d81efOfDOVNzp/AAgc3eKXg","Toast"),cc.Class({extends:cc.Component,onLoad:function(){this.isDestroyed=!1},selfDestroy:function(){if(!this.isDestroyed){this.isDestroyed=!0;var t=this.node.getComponent(cc.Animation);t.play("toast-close"),t.on("stop",function(){this.node.destroy()},this)}}}),cc._RF.pop()},{}]},{},["Ball","Game","GameOver","Global","GoHome","HomeBackground","Lab","MagicStarItem","MagicStarPurchase","MagicStarStatuses","Pause","Settings","Springboard","Star","Toast"]);